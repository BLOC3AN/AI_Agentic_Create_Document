# Phân Tích và Hướng Dẫn Sử Dụng Hàm `retrieve_knowledge`

## 1. Chức Năng Chính

### Hàm: `retrieve_knowledge`
- **Tham số**: 
  - `query: str`: Truy vấn đầu vào để tìm kiếm thông tin.
- **Mô tả**: 
  - Hàm này sử dụng retriever để lấy các đoạn văn bản liên quan đến truy vấn đầu vào.
- **Trả về**: 
  - `List[str]`: Danh sách các đoạn văn bản (`page_content`) liên quan đến truy vấn.

## 2. Phân Tích Nội Dung

### 2.1. Các Thư Viện Được Import

Các thư viện được import từ LangChain bao gồm:

| Thư viện                                   | Lớp sử dụng                             |
|--------------------------------------------|----------------------------------------|
| `langchain_community.document_loaders`     | `TextLoader`, `UnstructuredMarkdownLoader` |
| `langchain.text_splitter`                  | `CharacterTextSplitter`, `RecursiveCharacterTextSplitter` |
| `langchain_community.embeddings`           | `OpenAIEmbeddings`                     |
| `langchain_community.vectorstores`         | `FAISS`                                |

**Mô tả**: Các thư viện này được sử dụng để xử lý tài liệu, chia nhỏ văn bản, tạo embeddings và lưu trữ vector.

### 2.2. Tải Dữ Liệu

#### Tải Tài Liệu Văn Bản
- **Đường dẫn**: `./docs/reference.txt`
- **Loader**: `TextLoader`
- **Mô tả**: Tải tài liệu văn bản từ file `reference.txt`.

#### Tải Tài Liệu Markdown
- **Đường dẫn**: `./docs/example_doc.md`
- **Loader**: `UnstructuredMarkdownLoader`
- **Mô tả**: Tải tài liệu markdown từ file `example_doc.md`.

### 2.3. Xử Lý Văn Bản

#### Chia Nhỏ Văn Bản
Các phương pháp chia nhỏ tài liệu được sử dụng như sau:

| Loại Chia Nhỏ                 | Kích Thước Đoạn | Chồng Lên Kích Thước | Mô Tả                                                        |
|-------------------------------|------------------|----------------------|--------------------------------------------------------------|
| `CharacterTextSplitter`       | 1000 ký tự       | 50 ký tự             | Chia nhỏ tài liệu văn bản thành các đoạn với kích thước tối đa 1000 ký tự và 50 ký tự chồng lên nhau. |
| `RecursiveCharacterTextSplitter` | 1000 ký tự      | 50 ký tự             | Chia nhỏ tài liệu markdown theo cách tương tự nhưng sử dụng phương pháp đệ quy. |

#### Kết Hợp Các Đoạn Văn Bản
- **Mô tả**: Kết hợp các đoạn văn bản từ cả hai tài liệu đã tải để tạo thành một danh sách chung.

### 2.4. Tạo Embedding và Tìm Kiếm

#### Tạo Embedding
- **Lớp**: `OpenAIEmbeddings`
- **Mô tả**: Tạo embeddings cho các đoạn văn bản đã chia nhỏ.

#### Tạo Vector Store
- **Lớp**: `FAISS`
- **Mô tả**: Tạo một vector store từ các đoạn văn bản và embeddings đã tạo.

#### Chuyển Đổi thành Retriever
- **Mô tả**: Chuyển đổi vector store thành retriever để tìm kiếm tài liệu liên quan đến truy vấn.

## 3. Kết Luận
Bài viết này đã cung cấp một cái nhìn tổng quan về cách thức hoạt động của hàm `retrieve_knowledge`, cũng như các bước liên quan đến việc tải dữ liệu, xử lý văn bản và tìm kiếm thông tin liên quan. Việc hiểu rõ từng bước sẽ giúp bạn áp dụng hiệu quả hàm này trong các dự án của mình.
